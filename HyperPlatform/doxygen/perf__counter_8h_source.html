<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>HyperPlatform: HyperPlatform/perf_counter.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HyperPlatform
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_16fcf1458aec6cdcd2284700b6c28d4a.html">HyperPlatform</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">perf_counter.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="perf__counter_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) 2015-2016, tandasat. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Use of this source code is governed by a MIT-style license that can be</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// found in the LICENSE file.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifndef HYPERPLATFORM_PERF_COUNTER_H_</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define HYPERPLATFORM_PERF_COUNTER_H_</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;fltKernel.h&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// macro utilities</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="perf__counter_8h.html#a32b13a68527c692cb6a3eb11c9b2ae58">   24</a></span>&#160;<span class="preprocessor">#define HYPERPLATFORM_PERFCOUNTER_P_JOIN2(x, y) x##y</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="perf__counter_8h.html#a25c7ea3a395415e88c3cd49e5b0c03e0">   25</a></span>&#160;<span class="preprocessor">#define HYPERPLATFORM_PERFCOUNTER_P_JOIN1(x, y) \</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">  HYPERPLATFORM_PERFCOUNTER_P_JOIN2(x, y)</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="perf__counter_8h.html#a067fafa10997a2e2ac2ce0d302ed2e7f">   31</a></span>&#160;<span class="preprocessor">#define HYPERPLATFORM_PERFCOUNTER_P_JOIN(x, y) \</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">  HYPERPLATFORM_PERFCOUNTER_P_JOIN1(x, y)</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="perf__counter_8h.html#ae1adc34e0db566f7ceb5003424df99c1">   34</a></span>&#160;<span class="preprocessor">#define HYPERPLATFORM_PERFCOUNTER_P_TO_STRING1(n) #n</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="perf__counter_8h.html#a31aadbe8f5477dd412a9e2afdd031540">   38</a></span>&#160;<span class="preprocessor">#define HYPERPLATFORM_PERFCOUNTER_P_TO_STRING(n) \</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">  HYPERPLATFORM_PERFCOUNTER_P_TO_STRING1(n)</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">//  its constructor and destructor with \a query_time_routine, caluculates an</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="perf__counter_8h.html#a2ddec825fa225fc10b14f1abdf1c0052">   82</a></span>&#160;<span class="comment"></span><span class="preprocessor">#define HYPERPLATFORM_PERFCOUNTER_MEASURE_TIME(collector, query_time_routine) \</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">  const PerfCounter HYPERPLATFORM_PERFCOUNTER_P_JOIN(perf_obj_, __COUNTER__)( \</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">      (collector), (query_time_routine),                                      \</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">      __FUNCTION__ &quot;(&quot; HYPERPLATFORM_PERFCOUNTER_P_TO_STRING(__LINE__) &quot;)&quot;)</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">// constants and macros</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">// types</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">// prototypes</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">// variables</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">// implementations</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="class_perf_collector.html">  113</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_perf_collector.html">PerfCollector</a> {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="class_perf_collector.html#ac1f949922b5a93ad3c333e982465d67a">  116</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="class_perf_collector.html#ac1f949922b5a93ad3c333e982465d67a">InitialOutputRoutine</a> = void(_In_opt_ <span class="keywordtype">void</span>* output_context);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="class_perf_collector.html#a5cf15dd4d7f04acab5b53e9ba143c18b">  119</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="class_perf_collector.html#a5cf15dd4d7f04acab5b53e9ba143c18b">FinalOutputRoutine</a> = void(_In_opt_ <span class="keywordtype">void</span>* output_context);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keyword">using</span> <a class="code" href="class_perf_collector.html#ad8f390b5404451a7e0483bdad707af25">OutputRoutine</a> = void(_In_ <span class="keyword">const</span> <span class="keywordtype">char</span>* location_name,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                             _In_ ULONG64 total_execution_count,</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                             _In_ ULONG64 total_elapsed_time,</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="class_perf_collector.html#ad8f390b5404451a7e0483bdad707af25">  125</a></span>&#160;                             _In_opt_ <span class="keywordtype">void</span>* output_context);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">  128</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">LockRoutine</a> = void(_In_opt_ <span class="keywordtype">void</span>* lock_context);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="class_perf_collector.html#aa5d591a531bd0a5d5bd4f6f322eb59cb">  142</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="class_perf_collector.html#aa5d591a531bd0a5d5bd4f6f322eb59cb">Initialize</a>(</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      _In_ <a class="code" href="class_perf_collector.html#ad8f390b5404451a7e0483bdad707af25">OutputRoutine</a>* output_routine,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      _In_opt_ <a class="code" href="class_perf_collector.html#ac1f949922b5a93ad3c333e982465d67a">InitialOutputRoutine</a>* initial_output_routine = <a class="code" href="class_perf_collector.html#a698a78f32c494b596929cdce5e8479fc">NoOutputRoutine</a>,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      _In_opt_ <a class="code" href="class_perf_collector.html#a5cf15dd4d7f04acab5b53e9ba143c18b">FinalOutputRoutine</a>* final_output_routine = <a class="code" href="class_perf_collector.html#a698a78f32c494b596929cdce5e8479fc">NoOutputRoutine</a>,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      _In_opt_ <a class="code" href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">LockRoutine</a>* lock_enter_routine = <a class="code" href="class_perf_collector.html#abe4228ef2ff5f80549199e77f961ebc6">NoLockRoutine</a>,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      _In_opt_ <a class="code" href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">LockRoutine</a>* lock_leave_routine = <a class="code" href="class_perf_collector.html#abe4228ef2ff5f80549199e77f961ebc6">NoLockRoutine</a>,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      _In_opt_ <span class="keywordtype">void</span>* lock_context = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      _In_opt_ <span class="keywordtype">void</span>* output_context = <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="class_perf_collector.html#aa590b6f451be1e9428aef8a363df162f">initial_output_routine_</a> = initial_output_routine;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="class_perf_collector.html#a41c9cd88bb1fb8e50948152f690f7aff">final_output_routine_</a> = final_output_routine;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="class_perf_collector.html#a2ca57b8e123ae27bca8f81f144e77be1">output_routine_</a> = output_routine;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="class_perf_collector.html#ad6b3dff213d24fccfb1b31402adcd01b">lock_enter_routine_</a> = lock_enter_routine;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="class_perf_collector.html#a5398512f63e51c22b0ce4f2482c63728">lock_leave_routine_</a> = lock_leave_routine;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="class_perf_collector.html#abf1f075370388c74c22d54e52b2a1b03">lock_context_</a> = lock_context;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="class_perf_collector.html#a55c8b6ceb167d859c6918f8b11a59e01">output_context_</a> = output_context;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    memset(<a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>));</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="class_perf_collector.html#a51b2e62b26270d56013049142d1230a3">  161</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="class_perf_collector.html#a51b2e62b26270d56013049142d1230a3">Terminate</a>() {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[0].key) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <a class="code" href="class_perf_collector.html#aa590b6f451be1e9428aef8a363df162f">initial_output_routine_</a>(<a class="code" href="class_perf_collector.html#a55c8b6ceb167d859c6918f8b11a59e01">output_context_</a>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0ul; i &lt; <a class="code" href="class_perf_collector.html#a1c09e7b1b14d29ed1a3210bdc0ad1c84">kMaxNumberOfDataEntries</a>; i++) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[i].key == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <a class="code" href="class_perf_collector.html#a2ca57b8e123ae27bca8f81f144e77be1">output_routine_</a>(<a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[i].key, <a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[i].total_execution_count,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                      <a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[i].total_elapsed_time, <a class="code" href="class_perf_collector.html#a55c8b6ceb167d859c6918f8b11a59e01">output_context_</a>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[0].key) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <a class="code" href="class_perf_collector.html#a41c9cd88bb1fb8e50948152f690f7aff">final_output_routine_</a>(<a class="code" href="class_perf_collector.html#a55c8b6ceb167d859c6918f8b11a59e01">output_context_</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="class_perf_collector.html#ad2732346c4eef1a3c291dabb3588c280">  180</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="class_perf_collector.html#ad2732346c4eef1a3c291dabb3588c280">AddData</a>(_In_ <span class="keyword">const</span> <span class="keywordtype">char</span>* location_name, _In_ ULONG64 elapsed_time) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="class_perf_collector_1_1_scoped_lock.html">ScopedLock</a> lock(<a class="code" href="class_perf_collector.html#ad6b3dff213d24fccfb1b31402adcd01b">lock_enter_routine_</a>, <a class="code" href="class_perf_collector.html#a5398512f63e51c22b0ce4f2482c63728">lock_leave_routine_</a>, <a class="code" href="class_perf_collector.html#abf1f075370388c74c22d54e52b2a1b03">lock_context_</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> data_index = <a class="code" href="class_perf_collector.html#ad5cda67b5e08347a477f6211fc55793a">GetPerfDataIndex</a>(location_name);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span> (data_index == <a class="code" href="class_perf_collector.html#aa498ae7206371898e4c67f63c96a388d">kInvalidDataIndex</a>) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[data_index].<a class="code" href="struct_perf_collector_1_1_perf_data_entry.html#a4f0aae0c4541b9947fda8a6cf057afff">total_execution_count</a>++;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[data_index].<a class="code" href="struct_perf_collector_1_1_perf_data_entry.html#aa452ec37fed21f605cb255f0f4927cff">total_elapsed_time</a> += elapsed_time;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="class_perf_collector.html#aa498ae7206371898e4c67f63c96a388d">  194</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> ULONG <a class="code" href="class_perf_collector.html#aa498ae7206371898e4c67f63c96a388d">kInvalidDataIndex</a> = MAXULONG;</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="class_perf_collector.html#a1c09e7b1b14d29ed1a3210bdc0ad1c84">  195</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> ULONG <a class="code" href="class_perf_collector.html#a1c09e7b1b14d29ed1a3210bdc0ad1c84">kMaxNumberOfDataEntries</a> = 200;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="struct_perf_collector_1_1_perf_data_entry.html">  198</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_perf_collector_1_1_perf_data_entry.html">PerfDataEntry</a> {</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="struct_perf_collector_1_1_perf_data_entry.html#a73005510a660b154263d561490af7ab6">  199</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="struct_perf_collector_1_1_perf_data_entry.html#a73005510a660b154263d561490af7ab6">key</a>;                </div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="struct_perf_collector_1_1_perf_data_entry.html#a4f0aae0c4541b9947fda8a6cf057afff">  200</a></span>&#160;    ULONG64 <a class="code" href="struct_perf_collector_1_1_perf_data_entry.html#a4f0aae0c4541b9947fda8a6cf057afff">total_execution_count</a>;  </div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="struct_perf_collector_1_1_perf_data_entry.html#aa452ec37fed21f605cb255f0f4927cff">  201</a></span>&#160;    ULONG64 <a class="code" href="struct_perf_collector_1_1_perf_data_entry.html#aa452ec37fed21f605cb255f0f4927cff">total_elapsed_time</a>;     </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  };</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="class_perf_collector_1_1_scoped_lock.html">  205</a></span>&#160;  <span class="keyword">class </span><a class="code" href="class_perf_collector_1_1_scoped_lock.html">ScopedLock</a> {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keyword">public</span>:</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="class_perf_collector_1_1_scoped_lock.html#ae11d88877cf6da295543d36166fdc8cb">  212</a></span>&#160;    <a class="code" href="class_perf_collector_1_1_scoped_lock.html#ae11d88877cf6da295543d36166fdc8cb">ScopedLock</a>(_In_ <a class="code" href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">LockRoutine</a>* lock_routine, _In_ <a class="code" href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">LockRoutine</a>* leave_routine,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;               _In_opt_ <span class="keywordtype">void</span>* lock_context)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        : <a class="code" href="class_perf_collector_1_1_scoped_lock.html#a765fac176cb4a0286d83e62614e7fe61">lock_routine_</a>(lock_routine),</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;          <a class="code" href="class_perf_collector_1_1_scoped_lock.html#a62c970a894675a136164b77e002d2322">leave_routine_</a>(leave_routine),</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;          <a class="code" href="class_perf_collector_1_1_scoped_lock.html#af172364cab18dd5609bbd7bc03364bd4">lock_context_</a>(lock_context) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="class_perf_collector_1_1_scoped_lock.html#a765fac176cb4a0286d83e62614e7fe61">lock_routine_</a>(<a class="code" href="class_perf_collector_1_1_scoped_lock.html#af172364cab18dd5609bbd7bc03364bd4">lock_context_</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="class_perf_collector_1_1_scoped_lock.html#a6731dcfa84b7cef129831a60c0bbe4dd">  221</a></span>&#160;    <a class="code" href="class_perf_collector_1_1_scoped_lock.html#a6731dcfa84b7cef129831a60c0bbe4dd">~ScopedLock</a>() { <a class="code" href="class_perf_collector_1_1_scoped_lock.html#a62c970a894675a136164b77e002d2322">leave_routine_</a>(<a class="code" href="class_perf_collector_1_1_scoped_lock.html#af172364cab18dd5609bbd7bc03364bd4">lock_context_</a>); }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="keyword">private</span>:</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="class_perf_collector_1_1_scoped_lock.html#a765fac176cb4a0286d83e62614e7fe61">  224</a></span>&#160;    <a class="code" href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">LockRoutine</a>* <a class="code" href="class_perf_collector_1_1_scoped_lock.html#a765fac176cb4a0286d83e62614e7fe61">lock_routine_</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="class_perf_collector_1_1_scoped_lock.html#a62c970a894675a136164b77e002d2322">  225</a></span>&#160;    <a class="code" href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">LockRoutine</a>* <a class="code" href="class_perf_collector_1_1_scoped_lock.html#a62c970a894675a136164b77e002d2322">leave_routine_</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="class_perf_collector_1_1_scoped_lock.html#af172364cab18dd5609bbd7bc03364bd4">  226</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="class_perf_collector_1_1_scoped_lock.html#af172364cab18dd5609bbd7bc03364bd4">lock_context_</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  };</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="class_perf_collector.html#a698a78f32c494b596929cdce5e8479fc">  231</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_perf_collector.html#a698a78f32c494b596929cdce5e8479fc">NoOutputRoutine</a>(_In_opt_ <span class="keywordtype">void</span>* output_context) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    UNREFERENCED_PARAMETER(output_context);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="class_perf_collector.html#abe4228ef2ff5f80549199e77f961ebc6">  237</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_perf_collector.html#abe4228ef2ff5f80549199e77f961ebc6">NoLockRoutine</a>(_In_opt_ <span class="keywordtype">void</span>* lock_context) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    UNREFERENCED_PARAMETER(lock_context);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="class_perf_collector.html#ad5cda67b5e08347a477f6211fc55793a">  248</a></span>&#160;  ULONG <a class="code" href="class_perf_collector.html#ad5cda67b5e08347a477f6211fc55793a">GetPerfDataIndex</a>(_In_ <span class="keyword">const</span> <span class="keywordtype">char</span>* key) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (!key) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0ul; i &lt; <a class="code" href="class_perf_collector.html#a1c09e7b1b14d29ed1a3210bdc0ad1c84">kMaxNumberOfDataEntries</a>; i++) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[i].key == key) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[i].key == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[i].<a class="code" href="struct_perf_collector_1_1_perf_data_entry.html#a73005510a660b154263d561490af7ab6">key</a> = key;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_perf_collector.html#aa498ae7206371898e4c67f63c96a388d">kInvalidDataIndex</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="class_perf_collector.html#aa590b6f451be1e9428aef8a363df162f">  266</a></span>&#160;  <a class="code" href="class_perf_collector.html#ac1f949922b5a93ad3c333e982465d67a">InitialOutputRoutine</a>* <a class="code" href="class_perf_collector.html#aa590b6f451be1e9428aef8a363df162f">initial_output_routine_</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="class_perf_collector.html#a41c9cd88bb1fb8e50948152f690f7aff">  267</a></span>&#160;  <a class="code" href="class_perf_collector.html#a5cf15dd4d7f04acab5b53e9ba143c18b">FinalOutputRoutine</a>* <a class="code" href="class_perf_collector.html#a41c9cd88bb1fb8e50948152f690f7aff">final_output_routine_</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="class_perf_collector.html#a2ca57b8e123ae27bca8f81f144e77be1">  268</a></span>&#160;  <a class="code" href="class_perf_collector.html#ad8f390b5404451a7e0483bdad707af25">OutputRoutine</a>* <a class="code" href="class_perf_collector.html#a2ca57b8e123ae27bca8f81f144e77be1">output_routine_</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="class_perf_collector.html#ad6b3dff213d24fccfb1b31402adcd01b">  269</a></span>&#160;  <a class="code" href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">LockRoutine</a>* <a class="code" href="class_perf_collector.html#ad6b3dff213d24fccfb1b31402adcd01b">lock_enter_routine_</a>;</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="class_perf_collector.html#a5398512f63e51c22b0ce4f2482c63728">  270</a></span>&#160;  <a class="code" href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">LockRoutine</a>* <a class="code" href="class_perf_collector.html#a5398512f63e51c22b0ce4f2482c63728">lock_leave_routine_</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="class_perf_collector.html#abf1f075370388c74c22d54e52b2a1b03">  271</a></span>&#160;  <span class="keywordtype">void</span>* <a class="code" href="class_perf_collector.html#abf1f075370388c74c22d54e52b2a1b03">lock_context_</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="class_perf_collector.html#a55c8b6ceb167d859c6918f8b11a59e01">  272</a></span>&#160;  <span class="keywordtype">void</span>* <a class="code" href="class_perf_collector.html#a55c8b6ceb167d859c6918f8b11a59e01">output_context_</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">  273</a></span>&#160;  <a class="code" href="struct_perf_collector_1_1_perf_data_entry.html">PerfDataEntry</a> <a class="code" href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">data_</a>[<a class="code" href="class_perf_collector.html#a1c09e7b1b14d29ed1a3210bdc0ad1c84">kMaxNumberOfDataEntries</a>];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;};</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="class_perf_counter.html">  277</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_perf_counter.html">PerfCounter</a> {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="class_perf_counter.html#a127d4391725e12bf3e893ad8ff6955c4">  279</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="class_perf_counter.html#a127d4391725e12bf3e893ad8ff6955c4">QueryTimeRoutine</a> = ULONG64();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="class_perf_counter.html#aaa05908e51dc30a743459ddbc51f43ae">  288</a></span>&#160;  <a class="code" href="class_perf_counter.html#aaa05908e51dc30a743459ddbc51f43ae">PerfCounter</a>(_In_ <a class="code" href="class_perf_collector.html">PerfCollector</a>* collector,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;              _In_opt_ <a class="code" href="class_perf_counter.html#a127d4391725e12bf3e893ad8ff6955c4">QueryTimeRoutine</a>* query_time_routine,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;              _In_ <span class="keyword">const</span> <span class="keywordtype">char</span>* location_name)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      : <a class="code" href="class_perf_counter.html#af4277386408e7756db4d5a29a842c0c2">collector_</a>(collector),</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="class_perf_counter.html#a66c18e2543760725c2c5d7c70af9ce73">query_time_routine_</a>((query_time_routine) ? query_time_routine : <a class="code" href="class_perf_counter.html#ad1ad5e0a1f9a98057aa1336b41e456e4">RdTsc</a>),</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="class_perf_counter.html#a9c952fe007f0325111e4b55838f8e14c">location_name_</a>(location_name),</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <a class="code" href="class_perf_counter.html#a46beb415858f04eaac850b92cd494f49">before_time_</a>(<a class="code" href="class_perf_counter.html#a66c18e2543760725c2c5d7c70af9ce73">query_time_routine_</a>()) {}</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="class_perf_counter.html#a244b80e84a093daf74364210852227e0">  297</a></span>&#160;  <a class="code" href="class_perf_counter.html#a244b80e84a093daf74364210852227e0">~PerfCounter</a>() {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_perf_counter.html#af4277386408e7756db4d5a29a842c0c2">collector_</a>) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> elapsed_time = <a class="code" href="class_perf_counter.html#a66c18e2543760725c2c5d7c70af9ce73">query_time_routine_</a>() - <a class="code" href="class_perf_counter.html#a46beb415858f04eaac850b92cd494f49">before_time_</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <a class="code" href="class_perf_counter.html#af4277386408e7756db4d5a29a842c0c2">collector_</a>-&gt;<a class="code" href="class_perf_collector.html#ad2732346c4eef1a3c291dabb3588c280">AddData</a>(<a class="code" href="class_perf_counter.html#a9c952fe007f0325111e4b55838f8e14c">location_name_</a>, elapsed_time);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="class_perf_counter.html#ad1ad5e0a1f9a98057aa1336b41e456e4">  307</a></span>&#160;  <span class="keyword">static</span> ULONG64 <a class="code" href="class_perf_counter.html#ad1ad5e0a1f9a98057aa1336b41e456e4">RdTsc</a>() { <span class="keywordflow">return</span> __rdtsc(); }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="class_perf_counter.html#af4277386408e7756db4d5a29a842c0c2">  309</a></span>&#160;  <a class="code" href="class_perf_collector.html">PerfCollector</a>* <a class="code" href="class_perf_counter.html#af4277386408e7756db4d5a29a842c0c2">collector_</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="class_perf_counter.html#a66c18e2543760725c2c5d7c70af9ce73">  310</a></span>&#160;  <a class="code" href="class_perf_counter.html#a127d4391725e12bf3e893ad8ff6955c4">QueryTimeRoutine</a>* <a class="code" href="class_perf_counter.html#a66c18e2543760725c2c5d7c70af9ce73">query_time_routine_</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="class_perf_counter.html#a9c952fe007f0325111e4b55838f8e14c">  311</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="class_perf_counter.html#a9c952fe007f0325111e4b55838f8e14c">location_name_</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="class_perf_counter.html#a46beb415858f04eaac850b92cd494f49">  312</a></span>&#160;  <span class="keyword">const</span> ULONG64 <a class="code" href="class_perf_counter.html#a46beb415858f04eaac850b92cd494f49">before_time_</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;};</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">#endif  // HYPERPLATFORM_PERF_COUNTER_H_</span></div>
<div class="ttc" id="class_perf_collector_html_a55c8b6ceb167d859c6918f8b11a59e01"><div class="ttname"><a href="class_perf_collector.html#a55c8b6ceb167d859c6918f8b11a59e01">PerfCollector::output_context_</a></div><div class="ttdeci">void * output_context_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00272">perf_counter.h:272</a></div></div>
<div class="ttc" id="class_perf_collector_html_ad2732346c4eef1a3c291dabb3588c280"><div class="ttname"><a href="class_perf_collector.html#ad2732346c4eef1a3c291dabb3588c280">PerfCollector::AddData</a></div><div class="ttdeci">bool AddData(_In_ const char *location_name, _In_ ULONG64 elapsed_time)</div><div class="ttdoc">Saves performance data taken by PerfCounter. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00180">perf_counter.h:180</a></div></div>
<div class="ttc" id="class_perf_collector_1_1_scoped_lock_html_ae11d88877cf6da295543d36166fdc8cb"><div class="ttname"><a href="class_perf_collector_1_1_scoped_lock.html#ae11d88877cf6da295543d36166fdc8cb">PerfCollector::ScopedLock::ScopedLock</a></div><div class="ttdeci">ScopedLock(_In_ LockRoutine *lock_routine, _In_ LockRoutine *leave_routine, _In_opt_ void *lock_context)</div><div class="ttdoc">Accquires a lock using lock_routine. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00212">perf_counter.h:212</a></div></div>
<div class="ttc" id="class_perf_collector_1_1_scoped_lock_html_af172364cab18dd5609bbd7bc03364bd4"><div class="ttname"><a href="class_perf_collector_1_1_scoped_lock.html#af172364cab18dd5609bbd7bc03364bd4">PerfCollector::ScopedLock::lock_context_</a></div><div class="ttdeci">void * lock_context_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00226">perf_counter.h:226</a></div></div>
<div class="ttc" id="class_perf_collector_html_a51b2e62b26270d56013049142d1230a3"><div class="ttname"><a href="class_perf_collector.html#a51b2e62b26270d56013049142d1230a3">PerfCollector::Terminate</a></div><div class="ttdeci">void Terminate()</div><div class="ttdoc">Destructor; prints out accumerated performance results. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00161">perf_counter.h:161</a></div></div>
<div class="ttc" id="class_perf_collector_html_ad5cda67b5e08347a477f6211fc55793a"><div class="ttname"><a href="class_perf_collector.html#ad5cda67b5e08347a477f6211fc55793a">PerfCollector::GetPerfDataIndex</a></div><div class="ttdeci">ULONG GetPerfDataIndex(_In_ const char *key)</div><div class="ttdoc">Returns an index of data corresponds to the location_name. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00248">perf_counter.h:248</a></div></div>
<div class="ttc" id="struct_perf_collector_1_1_perf_data_entry_html"><div class="ttname"><a href="struct_perf_collector_1_1_perf_data_entry.html">PerfCollector::PerfDataEntry</a></div><div class="ttdoc">Represents performance data for each location. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00198">perf_counter.h:198</a></div></div>
<div class="ttc" id="class_perf_collector_html_a2ca57b8e123ae27bca8f81f144e77be1"><div class="ttname"><a href="class_perf_collector.html#a2ca57b8e123ae27bca8f81f144e77be1">PerfCollector::output_routine_</a></div><div class="ttdeci">OutputRoutine * output_routine_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00268">perf_counter.h:268</a></div></div>
<div class="ttc" id="class_perf_collector_1_1_scoped_lock_html_a6731dcfa84b7cef129831a60c0bbe4dd"><div class="ttname"><a href="class_perf_collector_1_1_scoped_lock.html#a6731dcfa84b7cef129831a60c0bbe4dd">PerfCollector::ScopedLock::~ScopedLock</a></div><div class="ttdeci">~ScopedLock()</div><div class="ttdoc">Releases a lock using ScopedLock::leave_routine_. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00221">perf_counter.h:221</a></div></div>
<div class="ttc" id="class_perf_counter_html_a46beb415858f04eaac850b92cd494f49"><div class="ttname"><a href="class_perf_counter.html#a46beb415858f04eaac850b92cd494f49">PerfCounter::before_time_</a></div><div class="ttdeci">const ULONG64 before_time_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00312">perf_counter.h:312</a></div></div>
<div class="ttc" id="class_perf_counter_html_a66c18e2543760725c2c5d7c70af9ce73"><div class="ttname"><a href="class_perf_counter.html#a66c18e2543760725c2c5d7c70af9ce73">PerfCounter::query_time_routine_</a></div><div class="ttdeci">QueryTimeRoutine * query_time_routine_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00310">perf_counter.h:310</a></div></div>
<div class="ttc" id="class_perf_counter_html_ad1ad5e0a1f9a98057aa1336b41e456e4"><div class="ttname"><a href="class_perf_counter.html#ad1ad5e0a1f9a98057aa1336b41e456e4">PerfCounter::RdTsc</a></div><div class="ttdeci">static ULONG64 RdTsc()</div><div class="ttdoc">Gets the current tiem using the RDTSC instruction. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00307">perf_counter.h:307</a></div></div>
<div class="ttc" id="class_perf_collector_html_aa5d591a531bd0a5d5bd4f6f322eb59cb"><div class="ttname"><a href="class_perf_collector.html#aa5d591a531bd0a5d5bd4f6f322eb59cb">PerfCollector::Initialize</a></div><div class="ttdeci">void Initialize(_In_ OutputRoutine *output_routine, _In_opt_ InitialOutputRoutine *initial_output_routine=NoOutputRoutine, _In_opt_ FinalOutputRoutine *final_output_routine=NoOutputRoutine, _In_opt_ LockRoutine *lock_enter_routine=NoLockRoutine, _In_opt_ LockRoutine *lock_leave_routine=NoLockRoutine, _In_opt_ void *lock_context=nullptr, _In_opt_ void *output_context=nullptr)</div><div class="ttdoc">Constructor; call this only once before any other code in this module runs. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00142">perf_counter.h:142</a></div></div>
<div class="ttc" id="class_perf_collector_1_1_scoped_lock_html"><div class="ttname"><a href="class_perf_collector_1_1_scoped_lock.html">PerfCollector::ScopedLock</a></div><div class="ttdoc">Scoped lock. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00205">perf_counter.h:205</a></div></div>
<div class="ttc" id="struct_perf_collector_1_1_perf_data_entry_html_aa452ec37fed21f605cb255f0f4927cff"><div class="ttname"><a href="struct_perf_collector_1_1_perf_data_entry.html#aa452ec37fed21f605cb255f0f4927cff">PerfCollector::PerfDataEntry::total_elapsed_time</a></div><div class="ttdeci">ULONG64 total_elapsed_time</div><div class="ttdoc">An accumrated elapsed time. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00201">perf_counter.h:201</a></div></div>
<div class="ttc" id="class_perf_counter_html"><div class="ttname"><a href="class_perf_counter.html">PerfCounter</a></div><div class="ttdoc">Measure elapsed time of the scope. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00277">perf_counter.h:277</a></div></div>
<div class="ttc" id="class_perf_collector_html_aa498ae7206371898e4c67f63c96a388d"><div class="ttname"><a href="class_perf_collector.html#aa498ae7206371898e4c67f63c96a388d">PerfCollector::kInvalidDataIndex</a></div><div class="ttdeci">static const ULONG kInvalidDataIndex</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00194">perf_counter.h:194</a></div></div>
<div class="ttc" id="class_perf_counter_html_aaa05908e51dc30a743459ddbc51f43ae"><div class="ttname"><a href="class_perf_counter.html#aaa05908e51dc30a743459ddbc51f43ae">PerfCounter::PerfCounter</a></div><div class="ttdeci">PerfCounter(_In_ PerfCollector *collector, _In_opt_ QueryTimeRoutine *query_time_routine, _In_ const char *location_name)</div><div class="ttdoc">Gets the current timeusing query_time_routine. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00288">perf_counter.h:288</a></div></div>
<div class="ttc" id="class_perf_collector_html_ad8f390b5404451a7e0483bdad707af25"><div class="ttname"><a href="class_perf_collector.html#ad8f390b5404451a7e0483bdad707af25">PerfCollector::OutputRoutine</a></div><div class="ttdeci">void(_In_ const char *location_name, _In_ ULONG64 total_execution_count, _In_ ULONG64 total_elapsed_time, _In_opt_ void *output_context) OutputRoutine</div><div class="ttdoc">A function type for printing out results. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00125">perf_counter.h:125</a></div></div>
<div class="ttc" id="class_perf_collector_html_a41c9cd88bb1fb8e50948152f690f7aff"><div class="ttname"><a href="class_perf_collector.html#a41c9cd88bb1fb8e50948152f690f7aff">PerfCollector::final_output_routine_</a></div><div class="ttdeci">FinalOutputRoutine * final_output_routine_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00267">perf_counter.h:267</a></div></div>
<div class="ttc" id="class_perf_collector_html_a5cf15dd4d7f04acab5b53e9ba143c18b"><div class="ttname"><a href="class_perf_collector.html#a5cf15dd4d7f04acab5b53e9ba143c18b">PerfCollector::FinalOutputRoutine</a></div><div class="ttdeci">void(_In_opt_ void *output_context) FinalOutputRoutine</div><div class="ttdoc">A function type for printing out a footer line of results. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00119">perf_counter.h:119</a></div></div>
<div class="ttc" id="class_perf_counter_html_a9c952fe007f0325111e4b55838f8e14c"><div class="ttname"><a href="class_perf_counter.html#a9c952fe007f0325111e4b55838f8e14c">PerfCounter::location_name_</a></div><div class="ttdeci">const char * location_name_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00311">perf_counter.h:311</a></div></div>
<div class="ttc" id="class_perf_collector_html_abf1f075370388c74c22d54e52b2a1b03"><div class="ttname"><a href="class_perf_collector.html#abf1f075370388c74c22d54e52b2a1b03">PerfCollector::lock_context_</a></div><div class="ttdeci">void * lock_context_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00271">perf_counter.h:271</a></div></div>
<div class="ttc" id="class_perf_collector_html_aa590b6f451be1e9428aef8a363df162f"><div class="ttname"><a href="class_perf_collector.html#aa590b6f451be1e9428aef8a363df162f">PerfCollector::initial_output_routine_</a></div><div class="ttdeci">InitialOutputRoutine * initial_output_routine_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00266">perf_counter.h:266</a></div></div>
<div class="ttc" id="class_perf_collector_1_1_scoped_lock_html_a62c970a894675a136164b77e002d2322"><div class="ttname"><a href="class_perf_collector_1_1_scoped_lock.html#a62c970a894675a136164b77e002d2322">PerfCollector::ScopedLock::leave_routine_</a></div><div class="ttdeci">LockRoutine * leave_routine_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00225">perf_counter.h:225</a></div></div>
<div class="ttc" id="struct_perf_collector_1_1_perf_data_entry_html_a4f0aae0c4541b9947fda8a6cf057afff"><div class="ttname"><a href="struct_perf_collector_1_1_perf_data_entry.html#a4f0aae0c4541b9947fda8a6cf057afff">PerfCollector::PerfDataEntry::total_execution_count</a></div><div class="ttdeci">ULONG64 total_execution_count</div><div class="ttdoc">How many times executed. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00200">perf_counter.h:200</a></div></div>
<div class="ttc" id="class_perf_collector_html_a1c09e7b1b14d29ed1a3210bdc0ad1c84"><div class="ttname"><a href="class_perf_collector.html#a1c09e7b1b14d29ed1a3210bdc0ad1c84">PerfCollector::kMaxNumberOfDataEntries</a></div><div class="ttdeci">static const ULONG kMaxNumberOfDataEntries</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00195">perf_counter.h:195</a></div></div>
<div class="ttc" id="class_perf_collector_html_a5398512f63e51c22b0ce4f2482c63728"><div class="ttname"><a href="class_perf_collector.html#a5398512f63e51c22b0ce4f2482c63728">PerfCollector::lock_leave_routine_</a></div><div class="ttdeci">LockRoutine * lock_leave_routine_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00270">perf_counter.h:270</a></div></div>
<div class="ttc" id="class_perf_collector_html_a68b05a26a5971febda74833d0d0fbdea"><div class="ttname"><a href="class_perf_collector.html#a68b05a26a5971febda74833d0d0fbdea">PerfCollector::data_</a></div><div class="ttdeci">PerfDataEntry data_[kMaxNumberOfDataEntries]</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00273">perf_counter.h:273</a></div></div>
<div class="ttc" id="class_perf_collector_1_1_scoped_lock_html_a765fac176cb4a0286d83e62614e7fe61"><div class="ttname"><a href="class_perf_collector_1_1_scoped_lock.html#a765fac176cb4a0286d83e62614e7fe61">PerfCollector::ScopedLock::lock_routine_</a></div><div class="ttdeci">LockRoutine * lock_routine_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00224">perf_counter.h:224</a></div></div>
<div class="ttc" id="class_perf_collector_html_a698a78f32c494b596929cdce5e8479fc"><div class="ttname"><a href="class_perf_collector.html#a698a78f32c494b596929cdce5e8479fc">PerfCollector::NoOutputRoutine</a></div><div class="ttdeci">static void NoOutputRoutine(_In_opt_ void *output_context)</div><div class="ttdoc">Default empty output routine. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00231">perf_counter.h:231</a></div></div>
<div class="ttc" id="class_perf_counter_html_a127d4391725e12bf3e893ad8ff6955c4"><div class="ttname"><a href="class_perf_counter.html#a127d4391725e12bf3e893ad8ff6955c4">PerfCounter::QueryTimeRoutine</a></div><div class="ttdeci">ULONG64( QueryTimeRoutine)</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00279">perf_counter.h:279</a></div></div>
<div class="ttc" id="struct_perf_collector_1_1_perf_data_entry_html_a73005510a660b154263d561490af7ab6"><div class="ttname"><a href="struct_perf_collector_1_1_perf_data_entry.html#a73005510a660b154263d561490af7ab6">PerfCollector::PerfDataEntry::key</a></div><div class="ttdeci">const char * key</div><div class="ttdoc">Identifies a subject matter location. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00199">perf_counter.h:199</a></div></div>
<div class="ttc" id="class_perf_collector_html_ac1f949922b5a93ad3c333e982465d67a"><div class="ttname"><a href="class_perf_collector.html#ac1f949922b5a93ad3c333e982465d67a">PerfCollector::InitialOutputRoutine</a></div><div class="ttdeci">void(_In_opt_ void *output_context) InitialOutputRoutine</div><div class="ttdoc">A function type for printing out a header line of results. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00116">perf_counter.h:116</a></div></div>
<div class="ttc" id="class_perf_collector_html"><div class="ttname"><a href="class_perf_collector.html">PerfCollector</a></div><div class="ttdoc">Responsible for collecting and saving data supplied by PerfCounter. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00113">perf_counter.h:113</a></div></div>
<div class="ttc" id="class_perf_collector_html_abe4228ef2ff5f80549199e77f961ebc6"><div class="ttname"><a href="class_perf_collector.html#abe4228ef2ff5f80549199e77f961ebc6">PerfCollector::NoLockRoutine</a></div><div class="ttdeci">static void NoLockRoutine(_In_opt_ void *lock_context)</div><div class="ttdoc">Default empty lock and release routine. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00237">perf_counter.h:237</a></div></div>
<div class="ttc" id="class_perf_counter_html_a244b80e84a093daf74364210852227e0"><div class="ttname"><a href="class_perf_counter.html#a244b80e84a093daf74364210852227e0">PerfCounter::~PerfCounter</a></div><div class="ttdeci">~PerfCounter()</div><div class="ttdoc">Measures an elapsed time and stores it to PerfCounter::collector_. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00297">perf_counter.h:297</a></div></div>
<div class="ttc" id="class_perf_collector_html_a9c8d930e4d6571824bf540b24d8195da"><div class="ttname"><a href="class_perf_collector.html#a9c8d930e4d6571824bf540b24d8195da">PerfCollector::LockRoutine</a></div><div class="ttdeci">void(_In_opt_ void *lock_context) LockRoutine</div><div class="ttdoc">A function type for acquiring and releasing a lock. </div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00128">perf_counter.h:128</a></div></div>
<div class="ttc" id="class_perf_collector_html_ad6b3dff213d24fccfb1b31402adcd01b"><div class="ttname"><a href="class_perf_collector.html#ad6b3dff213d24fccfb1b31402adcd01b">PerfCollector::lock_enter_routine_</a></div><div class="ttdeci">LockRoutine * lock_enter_routine_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00269">perf_counter.h:269</a></div></div>
<div class="ttc" id="class_perf_counter_html_af4277386408e7756db4d5a29a842c0c2"><div class="ttname"><a href="class_perf_counter.html#af4277386408e7756db4d5a29a842c0c2">PerfCounter::collector_</a></div><div class="ttdeci">PerfCollector * collector_</div><div class="ttdef"><b>Definition:</b> <a href="perf__counter_8h_source.html#l00309">perf_counter.h:309</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
